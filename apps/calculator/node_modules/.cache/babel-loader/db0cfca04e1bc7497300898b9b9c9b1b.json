{"ast":null,"code":"var _jsxFileName = \"/home/behrenle/Projects/private/arithmico-calculator/apps/calculator/src/components/calculator-textfields/calculator-textfields.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport useSessionStore, { useDispatch } from '../../stores/session-store/use-session-store';\nimport Textfield from '../textfield/textfield';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TextfieldsContainer = styled.main`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n`;\n_c = TextfieldsContainer;\nconst MathTextfield = styled(Textfield)`\n  width: 100%;\n  font-family: 'Source Code Pro', monospace;\n`;\n_c2 = MathTextfield;\nconst ErrorTextfield = styled(MathTextfield)`\n  color: var(--me-error);\n`;\n_c3 = ErrorTextfield;\nconst LabelContainer = styled.label`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  &:last-child {\n    margin-top: 80px;\n  }\n`;\n_c4 = LabelContainer;\nconst LabelText = styled.span`\n  margin-left: 20px;\n  margin-bottom: 5px;\n  font-size: 18px;\n  color: var(--me-text-100);\n  font-weight: var(--me-font-weight-normal);\n`;\n_c5 = LabelText;\nexport default function CalculatorTextfields() {\n  _s();\n\n  const dispatch = useDispatch();\n  const input = useSessionStore(state => state.session.input);\n\n  const setInput = input => dispatch({\n    type: 'setInput',\n    input\n  });\n\n  const outputResetted = useSessionStore(state => state.session.outputResetted);\n\n  const evaluate = () => dispatch({\n    type: 'evaluate'\n  });\n\n  const resetInput = () => dispatch({\n    type: 'resetInput'\n  });\n\n  const resetOutput = () => dispatch({\n    type: 'resetOutput'\n  });\n\n  const goBackInHistory = () => dispatch({\n    type: 'goBackInInputHistory'\n  });\n\n  const goForwardInHistory = () => dispatch({\n    type: 'goForwardInInputHistory'\n  });\n\n  const mathItems = useSessionStore(state => state.session.protocol.filter(hItem => hItem.type === 'math'));\n  const lastOutput = !outputResetted && mathItems.length > 0 ? mathItems[mathItems.length - 1].output : '';\n  const isError = mathItems.length > 0 ? mathItems[mathItems.length - 1].error : false;\n  const inputRef = useRef(null);\n  const outputRef = useRef(null);\n  const [t] = useTranslation();\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [inputRef]);\n  useHotkeys('alt + i', () => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, {\n    enableOnTags: ['INPUT']\n  });\n  useHotkeys('alt + o', () => {\n    if (outputRef.current) {\n      outputRef.current.focus();\n    }\n  }, {\n    enableOnTags: ['INPUT']\n  });\n  useHotkeys('ctrl + alt + i', () => {\n    resetInput();\n\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, {\n    enableOnTags: ['INPUT']\n  });\n  useHotkeys('ctrl + alt + o', () => {\n    resetOutput();\n  }, {\n    enableOnTags: ['INPUT']\n  });\n\n  const onInputKeyPress = e => {\n    if (e.key === 'Enter' && input.length > 0) {\n      evaluate();\n\n      if (outputRef.current) {\n        outputRef.current.focus();\n      }\n    }\n  };\n\n  const onOutputKeyPress = e => {\n    if (e.key === 'Enter') {\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    }\n  };\n\n  const handleKeyDown = e => {\n    if (e.key === 'ArrowUp') {\n      goBackInHistory();\n      e.preventDefault();\n    } else if (e.key === 'ArrowDown') {\n      goForwardInHistory();\n      e.preventDefault();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(TextfieldsContainer, {\n    children: [/*#__PURE__*/_jsxDEV(LabelContainer, {\n      children: [/*#__PURE__*/_jsxDEV(LabelText, {\n        children: t('common.input')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MathTextfield, {\n        ref: inputRef,\n        placeholder: t('common.input'),\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyPress: onInputKeyPress,\n        onKeyDown: e => handleKeyDown(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LabelContainer, {\n      children: [/*#__PURE__*/_jsxDEV(LabelText, {\n        children: t('common.output')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), isError ? /*#__PURE__*/_jsxDEV(ErrorTextfield, {\n        ref: outputRef,\n        placeholder: t('common.output'),\n        readOnly: true,\n        value: lastOutput,\n        onKeyPress: onOutputKeyPress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(MathTextfield, {\n        ref: outputRef,\n        placeholder: t('common.output'),\n        readOnly: true,\n        value: lastOutput,\n        onKeyPress: onOutputKeyPress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CalculatorTextfields, \"cKgcVHpaeWDphpDEUSUZSJba/9c=\", false, function () {\n  return [useDispatch, useSessionStore, useSessionStore, useSessionStore, useTranslation, useHotkeys, useHotkeys, useHotkeys, useHotkeys];\n});\n\n_c6 = CalculatorTextfields;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"TextfieldsContainer\");\n$RefreshReg$(_c2, \"MathTextfield\");\n$RefreshReg$(_c3, \"ErrorTextfield\");\n$RefreshReg$(_c4, \"LabelContainer\");\n$RefreshReg$(_c5, \"LabelText\");\n$RefreshReg$(_c6, \"CalculatorTextfields\");","map":{"version":3,"names":["React","useEffect","useRef","styled","useSessionStore","useDispatch","Textfield","useHotkeys","useTranslation","TextfieldsContainer","main","MathTextfield","ErrorTextfield","LabelContainer","label","LabelText","span","CalculatorTextfields","dispatch","input","state","session","setInput","type","outputResetted","evaluate","resetInput","resetOutput","goBackInHistory","goForwardInHistory","mathItems","protocol","filter","hItem","lastOutput","length","output","isError","error","inputRef","outputRef","t","current","focus","enableOnTags","onInputKeyPress","e","key","onOutputKeyPress","handleKeyDown","preventDefault","target","value"],"sources":["/home/behrenle/Projects/private/arithmico-calculator/apps/calculator/src/components/calculator-textfields/calculator-textfields.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport useSessionStore, { useDispatch } from '../../stores/session-store/use-session-store';\nimport { MathItem } from '../../stores/session-store/types';\nimport Textfield from '../textfield/textfield';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { useTranslation } from 'react-i18next';\n\nconst TextfieldsContainer = styled.main`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n`;\n\nconst MathTextfield = styled(Textfield)`\n  width: 100%;\n  font-family: 'Source Code Pro', monospace;\n`;\n\nconst ErrorTextfield = styled(MathTextfield)`\n  color: var(--me-error);\n`;\n\nconst LabelContainer = styled.label`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  &:last-child {\n    margin-top: 80px;\n  }\n`;\n\nconst LabelText = styled.span`\n  margin-left: 20px;\n  margin-bottom: 5px;\n  font-size: 18px;\n  color: var(--me-text-100);\n  font-weight: var(--me-font-weight-normal);\n`;\n\nexport default function CalculatorTextfields() {\n  const dispatch = useDispatch();\n  const input = useSessionStore((state) => state.session.input);\n  const setInput = (input: string) => dispatch({ type: 'setInput', input });\n  const outputResetted = useSessionStore((state) => state.session.outputResetted);\n  const evaluate = () => dispatch({ type: 'evaluate' });\n  const resetInput = () => dispatch({ type: 'resetInput' });\n  const resetOutput = () => dispatch({ type: 'resetOutput' });\n  const goBackInHistory = () => dispatch({ type: 'goBackInInputHistory' });\n  const goForwardInHistory = () => dispatch({ type: 'goForwardInInputHistory' });\n  const mathItems = useSessionStore((state) =>\n    state.session.protocol.filter((hItem) => hItem.type === 'math')\n  ) as MathItem[];\n  const lastOutput =\n    !outputResetted && mathItems.length > 0 ? mathItems[mathItems.length - 1].output : '';\n  const isError = mathItems.length > 0 ? mathItems[mathItems.length - 1].error : false;\n  const inputRef = useRef<HTMLInputElement>(null);\n  const outputRef = useRef<HTMLInputElement>(null);\n  const [t] = useTranslation();\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [inputRef]);\n\n  useHotkeys(\n    'alt + i',\n    () => {\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    },\n    { enableOnTags: ['INPUT'] }\n  );\n\n  useHotkeys(\n    'alt + o',\n    () => {\n      if (outputRef.current) {\n        outputRef.current.focus();\n      }\n    },\n    { enableOnTags: ['INPUT'] }\n  );\n\n  useHotkeys(\n    'ctrl + alt + i',\n    () => {\n      resetInput();\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    },\n    { enableOnTags: ['INPUT'] }\n  );\n\n  useHotkeys(\n    'ctrl + alt + o',\n    () => {\n      resetOutput();\n    },\n    { enableOnTags: ['INPUT'] }\n  );\n\n  const onInputKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter' && input.length > 0) {\n      evaluate();\n      if (outputRef.current) {\n        outputRef.current.focus();\n      }\n    }\n  };\n\n  const onOutputKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'ArrowUp') {\n      goBackInHistory();\n      e.preventDefault();\n    } else if (e.key === 'ArrowDown') {\n      goForwardInHistory();\n      e.preventDefault();\n    }\n  };\n\n  return (\n    <TextfieldsContainer>\n      <LabelContainer>\n        <LabelText>{t('common.input')}</LabelText>\n        <MathTextfield\n          ref={inputRef}\n          placeholder={t('common.input')}\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyPress={onInputKeyPress}\n          onKeyDown={(e) => handleKeyDown(e)}\n        />\n      </LabelContainer>\n      <LabelContainer>\n        <LabelText>{t('common.output')}</LabelText>\n        {isError ? (\n          <ErrorTextfield\n            ref={outputRef}\n            placeholder={t('common.output')}\n            readOnly\n            value={lastOutput}\n            onKeyPress={onOutputKeyPress}\n          />\n        ) : (\n          <MathTextfield\n            ref={outputRef}\n            placeholder={t('common.output')}\n            readOnly\n            value={lastOutput}\n            onKeyPress={onOutputKeyPress}\n          />\n        )}\n      </LabelContainer>\n    </TextfieldsContainer>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,QAAyC,OAAzC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,eAAP,IAA0BC,WAA1B,QAA6C,8CAA7C;AAEA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,SAASC,UAAT,QAA2B,oBAA3B;AACA,SAASC,cAAT,QAA+B,eAA/B;;AAEA,MAAMC,mBAAmB,GAAGN,MAAM,CAACO,IAAK;AACxC;AACA;AACA;AACA;AACA;AACA,CANA;KAAMD,mB;AAQN,MAAME,aAAa,GAAGR,MAAM,CAACG,SAAD,CAAY;AACxC;AACA;AACA,CAHA;MAAMK,a;AAKN,MAAMC,cAAc,GAAGT,MAAM,CAACQ,aAAD,CAAgB;AAC7C;AACA,CAFA;MAAMC,c;AAIN,MAAMC,cAAc,GAAGV,MAAM,CAACW,KAAM;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CARA;MAAMD,c;AAUN,MAAME,SAAS,GAAGZ,MAAM,CAACa,IAAK;AAC9B;AACA;AACA;AACA;AACA;AACA,CANA;MAAMD,S;AAQN,eAAe,SAASE,oBAAT,GAAgC;EAAA;;EAC7C,MAAMC,QAAQ,GAAGb,WAAW,EAA5B;EACA,MAAMc,KAAK,GAAGf,eAAe,CAAEgB,KAAD,IAAWA,KAAK,CAACC,OAAN,CAAcF,KAA1B,CAA7B;;EACA,MAAMG,QAAQ,GAAIH,KAAD,IAAmBD,QAAQ,CAAC;IAAEK,IAAI,EAAE,UAAR;IAAoBJ;EAApB,CAAD,CAA5C;;EACA,MAAMK,cAAc,GAAGpB,eAAe,CAAEgB,KAAD,IAAWA,KAAK,CAACC,OAAN,CAAcG,cAA1B,CAAtC;;EACA,MAAMC,QAAQ,GAAG,MAAMP,QAAQ,CAAC;IAAEK,IAAI,EAAE;EAAR,CAAD,CAA/B;;EACA,MAAMG,UAAU,GAAG,MAAMR,QAAQ,CAAC;IAAEK,IAAI,EAAE;EAAR,CAAD,CAAjC;;EACA,MAAMI,WAAW,GAAG,MAAMT,QAAQ,CAAC;IAAEK,IAAI,EAAE;EAAR,CAAD,CAAlC;;EACA,MAAMK,eAAe,GAAG,MAAMV,QAAQ,CAAC;IAAEK,IAAI,EAAE;EAAR,CAAD,CAAtC;;EACA,MAAMM,kBAAkB,GAAG,MAAMX,QAAQ,CAAC;IAAEK,IAAI,EAAE;EAAR,CAAD,CAAzC;;EACA,MAAMO,SAAS,GAAG1B,eAAe,CAAEgB,KAAD,IAChCA,KAAK,CAACC,OAAN,CAAcU,QAAd,CAAuBC,MAAvB,CAA+BC,KAAD,IAAWA,KAAK,CAACV,IAAN,KAAe,MAAxD,CAD+B,CAAjC;EAGA,MAAMW,UAAU,GACd,CAACV,cAAD,IAAmBM,SAAS,CAACK,MAAV,GAAmB,CAAtC,GAA0CL,SAAS,CAACA,SAAS,CAACK,MAAV,GAAmB,CAApB,CAAT,CAAgCC,MAA1E,GAAmF,EADrF;EAEA,MAAMC,OAAO,GAAGP,SAAS,CAACK,MAAV,GAAmB,CAAnB,GAAuBL,SAAS,CAACA,SAAS,CAACK,MAAV,GAAmB,CAApB,CAAT,CAAgCG,KAAvD,GAA+D,KAA/E;EACA,MAAMC,QAAQ,GAAGrC,MAAM,CAAmB,IAAnB,CAAvB;EACA,MAAMsC,SAAS,GAAGtC,MAAM,CAAmB,IAAnB,CAAxB;EACA,MAAM,CAACuC,CAAD,IAAMjC,cAAc,EAA1B;EAEAP,SAAS,CAAC,MAAM;IACd,IAAIsC,QAAQ,CAACG,OAAb,EAAsB;MACpBH,QAAQ,CAACG,OAAT,CAAiBC,KAAjB;IACD;EACF,CAJQ,EAIN,CAACJ,QAAD,CAJM,CAAT;EAMAhC,UAAU,CACR,SADQ,EAER,MAAM;IACJ,IAAIgC,QAAQ,CAACG,OAAb,EAAsB;MACpBH,QAAQ,CAACG,OAAT,CAAiBC,KAAjB;IACD;EACF,CANO,EAOR;IAAEC,YAAY,EAAE,CAAC,OAAD;EAAhB,CAPQ,CAAV;EAUArC,UAAU,CACR,SADQ,EAER,MAAM;IACJ,IAAIiC,SAAS,CAACE,OAAd,EAAuB;MACrBF,SAAS,CAACE,OAAV,CAAkBC,KAAlB;IACD;EACF,CANO,EAOR;IAAEC,YAAY,EAAE,CAAC,OAAD;EAAhB,CAPQ,CAAV;EAUArC,UAAU,CACR,gBADQ,EAER,MAAM;IACJmB,UAAU;;IACV,IAAIa,QAAQ,CAACG,OAAb,EAAsB;MACpBH,QAAQ,CAACG,OAAT,CAAiBC,KAAjB;IACD;EACF,CAPO,EAQR;IAAEC,YAAY,EAAE,CAAC,OAAD;EAAhB,CARQ,CAAV;EAWArC,UAAU,CACR,gBADQ,EAER,MAAM;IACJoB,WAAW;EACZ,CAJO,EAKR;IAAEiB,YAAY,EAAE,CAAC,OAAD;EAAhB,CALQ,CAAV;;EAQA,MAAMC,eAAe,GAAIC,CAAD,IAA8C;IACpE,IAAIA,CAAC,CAACC,GAAF,KAAU,OAAV,IAAqB5B,KAAK,CAACgB,MAAN,GAAe,CAAxC,EAA2C;MACzCV,QAAQ;;MACR,IAAIe,SAAS,CAACE,OAAd,EAAuB;QACrBF,SAAS,CAACE,OAAV,CAAkBC,KAAlB;MACD;IACF;EACF,CAPD;;EASA,MAAMK,gBAAgB,GAAIF,CAAD,IAA8C;IACrE,IAAIA,CAAC,CAACC,GAAF,KAAU,OAAd,EAAuB;MACrB,IAAIR,QAAQ,CAACG,OAAb,EAAsB;QACpBH,QAAQ,CAACG,OAAT,CAAiBC,KAAjB;MACD;IACF;EACF,CAND;;EAQA,MAAMM,aAAa,GAAIH,CAAD,IAA8C;IAClE,IAAIA,CAAC,CAACC,GAAF,KAAU,SAAd,EAAyB;MACvBnB,eAAe;MACfkB,CAAC,CAACI,cAAF;IACD,CAHD,MAGO,IAAIJ,CAAC,CAACC,GAAF,KAAU,WAAd,EAA2B;MAChClB,kBAAkB;MAClBiB,CAAC,CAACI,cAAF;IACD;EACF,CARD;;EAUA,oBACE,QAAC,mBAAD;IAAA,wBACE,QAAC,cAAD;MAAA,wBACE,QAAC,SAAD;QAAA,UAAYT,CAAC,CAAC,cAAD;MAAb;QAAA;QAAA;QAAA;MAAA,QADF,eAEE,QAAC,aAAD;QACE,GAAG,EAAEF,QADP;QAEE,WAAW,EAAEE,CAAC,CAAC,cAAD,CAFhB;QAGE,KAAK,EAAEtB,KAHT;QAIE,QAAQ,EAAG2B,CAAD,IAAOxB,QAAQ,CAACwB,CAAC,CAACK,MAAF,CAASC,KAAV,CAJ3B;QAKE,UAAU,EAAEP,eALd;QAME,SAAS,EAAGC,CAAD,IAAOG,aAAa,CAACH,CAAD;MANjC;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAYE,QAAC,cAAD;MAAA,wBACE,QAAC,SAAD;QAAA,UAAYL,CAAC,CAAC,eAAD;MAAb;QAAA;QAAA;QAAA;MAAA,QADF,EAEGJ,OAAO,gBACN,QAAC,cAAD;QACE,GAAG,EAAEG,SADP;QAEE,WAAW,EAAEC,CAAC,CAAC,eAAD,CAFhB;QAGE,QAAQ,MAHV;QAIE,KAAK,EAAEP,UAJT;QAKE,UAAU,EAAEc;MALd;QAAA;QAAA;QAAA;MAAA,QADM,gBASN,QAAC,aAAD;QACE,GAAG,EAAER,SADP;QAEE,WAAW,EAAEC,CAAC,CAAC,eAAD,CAFhB;QAGE,QAAQ,MAHV;QAIE,KAAK,EAAEP,UAJT;QAKE,UAAU,EAAEc;MALd;QAAA;QAAA;QAAA;MAAA,QAXJ;IAAA;MAAA;MAAA;MAAA;IAAA,QAZF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAmCD;;GA/HuB/B,oB;UACLZ,W,EACHD,e,EAESA,e,EAMLA,e,EAQNI,c,EAQZD,U,EAUAA,U,EAUAA,U,EAWAA,U;;;MAzDsBU,oB"},"metadata":{},"sourceType":"module"}